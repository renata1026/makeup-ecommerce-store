{"ast":null,"code":"import _defineProperty from\"/Users/pureg/Desktop/junoCollege/bootcamp/cohort46/juno/makeupCart/makeup copy/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/pureg/Desktop/junoCollege/bootcamp/cohort46/juno/makeupCart/makeup copy/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/pureg/Desktop/junoCollege/bootcamp/cohort46/juno/makeupCart/makeup copy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Trash}from'phosphor-react';import Coupon from'./Coupon';import Footer from'./Footer';import Navbar from'./Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=function Cart(){// State variables\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),quantity=_useState4[0],setQuantity=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalPrice=_useState6[0],setTotalPrice=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),cartItemTotalPrice=_useState8[0],setCartItemTotalPrice=_useState8[1];console.log(cartItemTotalPrice);// Function to handle quantity change\nvar handleQuantityChange=function handleQuantityChange(event,itemId){// Logic for updating the cart items' quantity and their total price\nvar newQuantity=parseInt(event.target.value)||1;var updatedCartItems=cartItems.map(function(item){if(item.id===itemId){var newTotalPrice=newQuantity*item.price;setCartItemTotalPrice(_objectSpread(_objectSpread({},cartItemTotalPrice),{},_defineProperty({},itemId,newTotalPrice)));return _objectSpread(_objectSpread({},item),{},{quantity:newQuantity});}return item;});setCartItems(updatedCartItems);// Update quantity in local storage\nlocalStorage.setItem('cartItems',JSON.stringify(updatedCartItems));};function handleKeyDown(event){if(event.key==='-'&&quantity>1){setQuantity(quantity-1);}}// Function to handle deleting a cart item\nvar handleDeleteCartItem=function handleDeleteCartItem(cartItem){var filteredCartItems=cartItems.filter(function(item){return item.id!==cartItem.id;});setCartItems(filteredCartItems);localStorage.setItem('cartItems',JSON.stringify(filteredCartItems));};// Effect to retrieve cart items from local storage and setting them as state\nuseEffect(function(){var carts=localStorage.getItem('cartItems');if(carts){var parsedCarts=JSON.parse(carts);var cartItemsWithQuantity=parsedCarts.map(function(item){return _objectSpread(_objectSpread({},item),{},{quantity:1});});setCartItems(cartItemsWithQuantity);setCartItemTotalPrice(cartItemsWithQuantity.reduce(function(acc,item){return _objectSpread(_objectSpread({},acc),{},_defineProperty({},item.id,item.price));},{}));}else{setCartItems(null);setCartItemTotalPrice({});}},[]);useEffect(function(){// Calculate the total price of all items in the cart\nvar total=0;if(cartItems&&cartItems.length>0){cartItems.forEach(function(cartItem){total+=cartItem.price*cartItem.quantity;});setTotalPrice(total);}},[cartItems]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper text-white\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"shopping\",children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"section\",{id:\"cart-container\",className:\"container\",children:/*#__PURE__*/_jsx(\"table\",{width:\"100%\",children:/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Remove\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Total\"})]})})})}),cartItems===null||cartItems.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Your cart is empty!\"})})}),cartItems&&cartItems.length>0&&cartItems.map(function(cartItem,index){return/*#__PURE__*/_jsx(\"section\",{id:\"cart-container\",className:\"container\",children:/*#__PURE__*/_jsx(\"table\",{width:\"100%\",children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border\",children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"trash-can\",onClick:function onClick(){return handleDeleteCartItem(cartItem);},children:/*#__PURE__*/_jsx(Trash,{size:24})})}),/*#__PURE__*/_jsx(\"td\",{className:\"image\",children:/*#__PURE__*/_jsx(\"img\",{className:\"cartImage\",src:cartItem.api_featured_image,alt:cartItem.name})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h3\",{children:cartItem.name})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",cartItem.price]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"quantity\",onChange:function onChange(event){return handleQuantityChange(event,cartItem.id);},onKeyDown:handleKeyDown,value:cartItem.quantity,type:\"number\"},cartItem.id)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",(cartItem.price*cartItem.quantity).toFixed(2)]})})]},cartItem.id)})})});})]}),/*#__PURE__*/_jsx(Coupon,{totalPrice:totalPrice}),/*#__PURE__*/_jsx(Footer,{})]});};export default Cart;","map":{"version":3,"names":["React","useState","useEffect","Trash","Coupon","Footer","Navbar","Cart","cartItems","setCartItems","quantity","setQuantity","totalPrice","setTotalPrice","cartItemTotalPrice","setCartItemTotalPrice","console","log","handleQuantityChange","event","itemId","newQuantity","parseInt","target","value","updatedCartItems","map","item","id","newTotalPrice","price","localStorage","setItem","JSON","stringify","handleKeyDown","key","handleDeleteCartItem","cartItem","filteredCartItems","filter","carts","getItem","parsedCarts","parse","cartItemsWithQuantity","reduce","acc","total","length","forEach","index","api_featured_image","name","toFixed"],"sources":["/Users/pureg/Desktop/junoCollege/bootcamp/cohort46/juno/makeupCart/makeup copy/src/components/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Trash } from 'phosphor-react';\nimport Coupon from './Coupon';\nimport Footer from './Footer';\nimport Navbar from './Navbar';\n\nconst Cart = () => {\n  // State variables\n  const [cartItems, setCartItems] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [cartItemTotalPrice, setCartItemTotalPrice] = useState({});\n  console.log(cartItemTotalPrice);\n  // Function to handle quantity change\n  const handleQuantityChange = (event, itemId) => {\n    // Logic for updating the cart items' quantity and their total price\n    const newQuantity = parseInt(event.target.value) || 1;\n    const updatedCartItems = cartItems.map((item) => {\n      if (item.id === itemId) {\n        const newTotalPrice = newQuantity * item.price;\n        setCartItemTotalPrice({\n          ...cartItemTotalPrice,\n          [itemId]: newTotalPrice,\n        });\n        return {\n          ...item,\n          quantity: newQuantity,\n        };\n      }\n      return item;\n    });\n    setCartItems(updatedCartItems);\n\n    // Update quantity in local storage\n    localStorage.setItem('cartItems', JSON.stringify(updatedCartItems));\n  };\n\n  function handleKeyDown(event) {\n    if (event.key === '-' && quantity > 1) {\n      setQuantity(quantity - 1);\n    }\n  }\n  // Function to handle deleting a cart item\n  const handleDeleteCartItem = (cartItem) => {\n    let filteredCartItems = cartItems.filter((item) => item.id !== cartItem.id);\n\n    setCartItems(filteredCartItems);\n    localStorage.setItem('cartItems', JSON.stringify(filteredCartItems));\n  };\n  // Effect to retrieve cart items from local storage and setting them as state\n  useEffect(() => {\n    const carts = localStorage.getItem('cartItems');\n    if (carts) {\n      const parsedCarts = JSON.parse(carts);\n      const cartItemsWithQuantity = parsedCarts.map((item) => ({\n        ...item,\n        quantity: 1,\n      }));\n      setCartItems(cartItemsWithQuantity);\n      setCartItemTotalPrice(\n        cartItemsWithQuantity.reduce(\n          (acc, item) => ({ ...acc, [item.id]: item.price }),\n          {}\n        )\n      );\n    } else {\n      setCartItems(null);\n      setCartItemTotalPrice({});\n    }\n  }, []);\n\n  useEffect(() => {\n    // Calculate the total price of all items in the cart\n    let total = 0;\n    if (cartItems && cartItems.length > 0) {\n      cartItems.forEach((cartItem) => {\n        total += cartItem.price * cartItem.quantity;\n      });\n      setTotalPrice(total);\n    }\n  }, [cartItems]);\n\n  return (\n    <>\n      <Navbar />\n\n      <div className=\"wrapper text-white\">\n        <h2 className=\"shopping\">Shopping Cart</h2>\n        <section id=\"cart-container\" className=\"container\">\n          <table width=\"100%\">\n            <thead>\n              <tr>\n                <td>Remove</td>\n                <td>Image</td>\n                <td>Product</td>\n                <td>Price</td>\n                <td>Quantity</td>\n                <td>Total</td>\n              </tr>\n            </thead>\n          </table>\n        </section>\n\n        {cartItems === null ||\n          (cartItems.length === 0 && (\n            <tr>\n              <td colSpan=\"6\">\n                <h1>Your cart is empty!</h1>\n              </td>\n            </tr>\n          ))}\n        {cartItems &&\n          cartItems.length > 0 &&\n          cartItems.map((cartItem, index) => {\n            return (\n              <section id=\"cart-container\" className=\"container\">\n                <table width=\"100%\">\n                  <tbody>\n                    <tr key={cartItem.id} className=\"border\">\n                      <td>\n                        <button\n                          className=\"trash-can\"\n                          onClick={() => handleDeleteCartItem(cartItem)}\n                        >\n                          <Trash size={24} />\n                        </button>\n                      </td>\n                      <td className=\"image\">\n                        <img\n                          className=\"cartImage\"\n                          src={cartItem.api_featured_image}\n                          alt={cartItem.name}\n                        />\n                      </td>\n                      <td>\n                        <h3>{cartItem.name}</h3>\n                      </td>\n                      <td>\n                        <p>${cartItem.price}</p>\n                      </td>\n                      <td>\n                        <input\n                          className=\"quantity\"\n                          key={cartItem.id}\n                          onChange={(event) =>\n                            handleQuantityChange(event, cartItem.id)\n                          }\n                          onKeyDown={handleKeyDown}\n                          value={cartItem.quantity}\n                          type=\"number\"\n                        ></input>\n                      </td>\n                      <td>\n                        <span>\n                          ${(cartItem.price * cartItem.quantity).toFixed(2)}\n                        </span>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </section>\n            );\n          })}\n      </div>\n      <Coupon totalPrice={totalPrice} />\n      <Footer />\n    </>\n  );\n};\nexport default Cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}